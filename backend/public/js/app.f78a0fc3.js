(function(e){function t(t){for(var s,a,o=t[0],c=t[1],u=t[2],d=0,f=[];d<o.length;d++)a=o[d],r[a]&&f.push(r[a][0]),r[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(s=!1)}s&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},r={app:0},i=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0079":function(e,t,n){"use strict";var s=n("ddff"),r=n.n(s);r.a},"029f":function(e,t,n){e.exports=n.p+"img/10.07c32c7d.jpg"},"038c":function(e,t,n){},"0472":function(e,t,n){e.exports=n.p+"img/7.710ca87c.jpg"},"0c2f":function(e,t,n){},"0d3a":function(e,t,n){"use strict";var s=n("de21"),r=n.n(s);r.a},"0fb2":function(e,t,n){"use strict";var s=n("982a"),r=n.n(s);r.a},1:function(e,t){},"12b8":function(e,t,n){"use strict";var s=n("0c2f"),r=n.n(s);r.a},"1b08":function(e,t,n){"use strict";var s=n("88a7"),r=n.n(s);r.a},3171:function(e,t,n){},3517:function(e,t,n){},3613:function(e,t,n){e.exports=n.p+"img/1.14416977.jpg"},"386b":function(e,t,n){"use strict";var s=n("edbe"),r=n.n(s);r.a},4678:function(e,t,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb718","./de-ch.js":"bb718","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=i(e);return n(t)}function i(e){var t=s[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),r=n("bb71"),i=n("c0a4"),a=n.n(i);n("da64");s["a"].use(r["a"],{iconfont:"md",theme:{primary:a.a.blue,secondary:a.a.grey,accent:a.a.shades.black,error:a.a.red.accent3}});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[e.showNav?n("app-header"):e._e(),n("router-view",{on:{homepage:e.toggleNav}})],1)},c=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("v-layout",{staticClass:"app-header"},[n("v-container",{staticClass:"flex hamburger-container",class:{trans:e.isScroll}},[n("v-toolbar-side-icon",{attrs:{flat:"",color:""},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-spacer"),n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-btn",e._g({class:e.classByUnread,attrs:{flat:"",color:""}},s),[n("v-icon",[e._v("notifications")]),e._v("("+e._s(e.unread)+")")],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("user-notifications")],1)],1),n("v-navigation-drawer",{staticClass:"nav-container",attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{staticClass:"pa-1"},[null!==e.username?n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-avatar",[n("img",{attrs:{src:e.imgProfile}})]),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(e.username))])],1)],1):e._e()],1),n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-divider"),e.username?n("button",{staticClass:"px-4 py-2",class:e.classByUnread,on:{click:function(t){return t.stopPropagation(),e.toggleShowNotifications(t)}}},[e._v("Notifications ("+e._s(e.unread)+")")]):e._e(),e.showNotifications?n("user-notifications"):e._e(),e._l(e.items,function(t){return n("v-list-tile",{key:t.title,staticClass:"nav-item"},[n("router-link",{attrs:{to:t.link}},[n("v-list-tile-content",[n("v-list-tile-title",[n("v-icon",{attrs:{color:"black",left:""}},[e._v(e._s(t.icon))]),e._v("\n                "+e._s(t.title)+"\n              ")],1)],1)],1)],1)}),n("v-list-tile",{staticClass:"nav-item"},[n("router-link",{attrs:{to:"/signup"}},[n("v-list-tile-content",{on:{click:e.doLogOut}},[n("v-list-tile-title",[n("v-icon",{attrs:{color:"black",left:""}},[e._v("person")]),e._v("LogOut\n              ")],1)],1)],1)],1)],2)],1)],1),null!==e.newNotification?n("new-notification",{attrs:{newNotification:e.newNotification}}):e._e()],1)},l=[],d=(n("7f7f"),n("ac6a"),n("456d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")}),f=[],p=(n("2a97"),{props:["newNotification"],created:function(){var e=this;"request"===this.newNotification.type?this.$noty.info(this.newNotification.message):"friendship"===this.newNotification.type&&this.$noty.success(this.newNotification.message),setTimeout(function(){e.$store.dispatch({type:"clearNewNotification"})},1e3)}}),h=p,m=n("2877"),g=Object(m["a"])(h,d,f,!1,null,null,null),v=g.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.notifications,function(t,s){return n("v-card",{key:(t||{}).timestamp,on:{click:function(t){return e.readNofitication(s)}}},[n("v-list",[n("v-list-tile",[n("v-btn",{class:e.fav?"blue--text":"",attrs:{icon:""},on:{click:function(t){e.fav=!e.fav}}},[n("v-icon",[e._v("supervised_user_circle")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.message))]),n("v-list-tile-sub-title",[e._v(" ("+e._s(e._f("timeAgo")(t.timestamp))+")")])],1)],1)],1),n("v-divider")],1)}),1)},y=[],_={data:function(){return{fav:!0,message:!1,hints:!0}},computed:{notifications:function(){return this.$store.getters.notifications}},methods:{readNofitication:function(e){this.$store.dispatch({type:"readNotification",index:e})}}},j=_,x=(n("a529"),n("6544")),w=n.n(x),C=n("8336"),I=n("b0af"),k=n("ce7e"),U=n("132d"),$=n("8860"),q=n("ba95"),N=n("5d23"),S=Object(m["a"])(j,b,y,!1,null,"62950026",null),F=S.exports;w()(S,{VBtn:C["a"],VCard:I["a"],VDivider:k["a"],VIcon:U["a"],VList:$["a"],VListTile:q["a"],VListTileContent:N["a"],VListTileSubTitle:N["b"],VListTileTitle:N["c"]});var O={data:function(){return{menu:!1,header:300,isScroll:!1,drawer:null,width:300,items:[{icon:"home",title:"Home",link:"/"},{icon:"location_on",title:"Find Nearby",link:"/user"},{icon:"account_circle",title:"Edit Profile",link:"/profile"},{icon:"inbox",title:"Inbox",link:"/inbox/friends"},{icon:"info",title:"About",link:"/about"},{icon:"insert_chart_outlined",title:"Admin",link:"/admin"},{icon:"person",title:"Login",link:"/login"},{icon:"person",title:"Signup",link:"/signup"}],showNotifications:!1}},methods:{getCurrentScroll:function(){return window.pageYOffset||document.documentElement.scrollTop},doLogOut:function(){this.$store.dispatch({type:"logout"})},toggleShowNotifications:function(){this.showNotifications=!this.showNotifications}},computed:{username:function(){var e=this.$store.getters.loggedInUser;return null===e?null:Object.keys(e).length?e.name.first:null},imgProfile:function(){var e=this.$store.getters.loggedInUser;return null===e?null:Object.keys(e).length?e.profileImg:null},unread:function(){return this.$store.getters.unreadNotifications},classByUnread:function(){return this.unread?"unread":"allread"},newNotification:function(){return this.$store.getters.newNotification}},created:function(){window.scroll(function(){var e=this.getCurrentScroll();e>=this.header?this.isScroll=!0:this.isScroll=!1})},components:{UserNotifications:F,NewNotification:v}},L=O,A=(n("386b"),n("a523")),T=n("a722"),B=n("c954"),V=n("e449"),R=n("f774"),M=n("9910"),P=n("706c"),E=Object(m["a"])(L,u,l,!1,null,null,null),D=E.exports;w()(E,{VBtn:C["a"],VContainer:A["a"],VDivider:k["a"],VIcon:U["a"],VLayout:T["a"],VList:$["a"],VListTile:q["a"],VListTileAvatar:B["a"],VListTileContent:N["a"],VListTileTitle:N["c"],VMenu:V["a"],VNavigationDrawer:R["a"],VSpacer:M["a"],VToolbarSideIcon:P["a"]});var z={data:function(){return{showNav:!0}},created:function(){this.$store.dispatch({type:"loadUserOrDefaultUser"})},methods:{toggleNav:function(e){this.showNav=e}},components:{AppHeader:D}},H=z,J=n("7496"),Y=Object(m["a"])(H,o,c,!1,null,null,null),G=Y.exports;w()(Y,{VApp:J["a"]});var K=n("8c4f"),W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"lato-light homepage"},[n("background-gallery"),n("div",{staticClass:"main-container flex column"},[e._m(0),e._m(1),n("section",{staticClass:"location-container flex column"},[n("span",[e._v("Find travelers in your current location")]),n("div",{staticClass:"btn primary-dark",on:{click:e.getUserLocation}},[n("v-icon",{staticClass:"px-1",attrs:{color:"white"}},[e._v("location_on")]),e._v("Enable location\n        "),n("span",{staticClass:"shiny"})],1)])]),n("div",{staticClass:"flex column secondery-container"},[n("h1",{},[e._v("Find travelers")]),n("span",{},[e._v("Search for travelers in a chosen location")]),n("div",{staticClass:"flex column bg"},[n("div",{staticClass:"flex select"},[n("v-autocomplete",{staticClass:"input",attrs:{"full-width":"",clearable:"",items:e.items,label:"Search location",hint:"Select a location","item-text":"address","item-value":"location","return-object":"",autocomplete:""},on:{input:function(t){return e.setLocation(e.selectedLocation)}},model:{value:e.selectedLocation,callback:function(t){e.selectedLocation=t},expression:"selectedLocation"}}),n("button",{staticClass:"btn flex"},[n("v-icon",{attrs:{left:"",color:"white"}},[e._v("search")])],1)],1)])]),n("cards-3D",{on:{setLocation:e.setLocation}})],1)},Z=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"logo sensations"},[e._v("MeeTravel")]),n("h4",{},[e._v("Meet people. Have an adventure.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-presenting flex column"},[n("p",[e._v("Traveling?")]),n("p",[e._v("Connect with travelers nearby")])])}],Q=(n("6762"),n("2fdb"),n("7514"),{getCityByLatLng:ee,getLatLngByAddress:te,getPosition:ne}),X="AIzaSyAQz_Zc9Ys9pFeNAYxOhagonVUGOyg_zlg";function ee(e,t){return fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e,",").concat(t,"&key=").concat(X)).then(function(e){return e.json()}).then(function(e){var t=e.results.find(function(e){return e.types.includes("locality")});return t.formatted_address}).catch(function(e){console.log("there is a problam",e)})}function te(e){return fetch("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e,"&key=").concat(X)).then(function(e){return e.json()}).then(function(e){return e.results[0].geometry.location}).catch(function(e){console.log("there is a problam",e)})}function ne(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)})}var se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"bg-gallery"},e._l(e.bgs,function(e){return s("div",{key:e.id,staticClass:"bg-img imageFade",class:"img"+e.id,style:{backgroundImage:"url("+n("e901")("./"+e.id+".jpg")+")"}})}),0)},re=[],ie={data:function(){return{count:0,interval:null,bgs:[{id:1,isActive:!0},{id:2,isActive:!1},{id:3,isActive:!1},{id:4,isActive:!1},{id:5,isActive:!1},{id:6,isActive:!1},{id:7,isActive:!1},{id:8,isActive:!1},{id:9,isActive:!1},{id:10,isActive:!1}]}},methods:{startAnimation:function(){this.interval=setInterval(function(){},5e3)}},created:function(){this.startAnimation()},destroyed:function(){clearInterval(this.interval)},computed:{}},ae=ie,oe=Object(m["a"])(ae,se,re,!1,null,null,null),ce=oe.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"cards-list"},[n("v-parallax",{staticClass:"cards-parallax",staticStyle:{height:"80vh"},attrs:{dark:"",src:"https://wallpapercave.com/wp/wp2013491.jpg"}},[n("v-layout",{staticClass:"main-container",attrs:{"align-center":"",column:"","justify-center":""}},[n("h1",{staticClass:"display-2 font-weight-thin mb-3"},[e._v("Top Locations")]),n("h4",{staticClass:"font-weight-thin"},[e._v("Popular locations in our travelers community")]),n("div",{},[n("div",{staticClass:"cards-container"},e._l(e.cards,function(t,s){return n("div",{key:t.title,staticClass:"card",style:{backgroundImage:"url('"+t.imgUrl+"')"},on:{click:function(t){return e.emitLocation(s)}}},[n("div",{staticClass:"description"},[n("div",{},[n("h3",[e._v(e._s(t.address))])])])])}),0)])])],1)],1)},le=[],de={data:function(){return{cards:[{address:"Tel Aviv, Israel",coords:{lat:32.109333,lng:34.855499},imgUrl:"https://avia.md/app/uploads/2018/04/tel_aviv.jpg"},{address:"Tokyo, Japan",coords:{lat:35.652832,lng:139.839478},imgUrl:"https://media.timeout.com/images/105472310/750/562/image.jpg"},{address:"NYC, New York",coords:{lat:40.73061,lng:-73.935242},imgUrl:"https://media.timeout.com/images/105403910/750/562/image.jpg"},{address:"Bangkok, Thailand",coords:{lat:13.756331,lng:100.501762},imgUrl:"https://media.timeout.com/images/105403995/750/562/image.jpg"},{address:"San Sebastián, Spain",coords:{lat:43.3209,lng:-1.98452},imgUrl:"http://www.urbanadventures.com/blog/wp-content/uploads/The-first-view.jpg"},{address:"Dubai, United Arab Emirates",coords:{lat:25.204849,lng:55.270782},imgUrl:"https://media.timeout.com/images/105403985/750/562/image.jpg"},{address:"London, United Kingdom",coords:{lat:51.507351,lng:-.127758},imgUrl:"https://cdn.londonandpartners.com/visit/general-london/areas/river/76709-640x360-houses-of-parliament-and-london-eye-on-thames-from-above-640.jpg"},{address:"Paris, France",coords:{lat:48.856613,lng:2.352222},imgUrl:"https://media.timeout.com/images/105403930/750/562/image.jpg"},{address:"Honolulu, Hawaii",coords:{lat:21.306944,lng:-157.858337},imgUrl:"https://www3.hilton.com/resources/media/hi/HNLHVHH/en_US/img/shared/full_page_image_gallery/main/HH_exterior01_1270x560_FitToBoxSmallDimension_Center.jpg"}]}},methods:{emitLocation:function(e){this.$emit("setLocation",this.cards[e])}}},fe=de,pe=n("8b9c"),he=Object(m["a"])(fe,ue,le,!1,null,null,null),me=he.exports;w()(he,{VLayout:T["a"],VParallax:pe["a"]});var ge={name:"home",created:function(){this.$emit("homepage",!1)},data:function(){return{location:{lat:null,lng:null,address:null},selectedLocation:{address:null,coords:{lat:null,lng:null}},items:[{address:"Tel Aviv, Israel",coords:{lat:32.109333,lng:34.855499}},{address:"Tokyo, Japan",coords:{lat:35.652832,lng:139.839478}},{address:"NYC, New York",coords:{lat:40.73061,lng:-73.935242}},{address:"Bangkok, Thailand",coords:{lat:13.756331,lng:100.501762}},{address:"San Sebastián, Spain",coords:{lat:43.3209,lng:-1.98452}},{address:"Dubai, United Arab Emirates",coords:{lat:25.204849,lng:55.270782}},{address:"London, United Kingdom",coords:{lat:51.507351,lng:-.127758}},{address:"Paris, France",coords:{lat:48.856613,lng:2.352222}},{address:"Honolulu, Hawaii",coords:{lat:21.306944,lng:-157.858337}},{address:"Singapore , Southeast Asia",coords:{lat:1.352083,lng:103.819839}},{address:"Mumbai, India",coords:{lat:19.009809,lng:72.866287}},{address:"Athens, Greece",coords:{lat:37.98381,lng:23.727539}},{address:"Istanbul, Turkey",coords:{lat:41.00824,lng:28.978359}},{address:"Seoul, South Korea",coords:{lat:37.566536,lng:126.977966}},{address:"Chicago, Illinois",coords:{lat:41.878113,lng:-87.629799}},{address:"Las Vegas, Nevada",coords:{lat:36.169941,lng:-115.139832}},{address:"San Francisco, California",coords:{lat:37.774929,lng:-122.419418}},{address:"Washington, D.C.",coords:{lat:38.907192,lng:-77.036873}},{address:"San Francisco, California",coords:{lat:29.951065,lng:-90.071533}},{address:"Orlando, Florida",coords:{lat:28.538336,lng:-81.379234}},{address:"Oslo, Norway",coords:{lat:59.913868,lng:10.752245}},{address:"Rome, Italy",coords:{lat:41.902782,lng:12.496365}},{address:"Zurich, Switzerland",coords:{lat:47.369019,lng:8.53803}}]}},computed:{isAddress:function(){return null===this.address}},methods:{getUserLocation:function(){var e=this;Q.getPosition().then(function(t){e.location.lat=t.coords.latitude,e.location.lng=t.coords.longitude,Q.getCityByLatLng(e.location.lat,e.location.lng).then(function(t){e.location.address=t,e.goToUsers()})})},setLocation:function(e){var t=e.coords,n=e.address;this.location.lat=t.lat,this.location.lng=t.lng,this.location.address=n,this.goToUsers()},goToUsers:function(){this.$store.dispatch({type:"updateLocation",location:this.location}),this.$router.push("/user")}},destroyed:function(){this.$emit("homepage",!0)},components:{backgroundGallery:ce,Cards3D:me}},ve=ge,be=n("c6a6"),ye=Object(m["a"])(ve,W,Z,!1,null,null,null),_e=ye.exports;w()(ye,{VAutocomplete:be["a"],VIcon:U["a"]});var je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"log-in"},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.doLogIn(t)}}},[n("v-text-field",{attrs:{"prepend-icon":"person",label:"First name",type:"text"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),n("v-text-field",{attrs:{"prepend-icon":"lock",label:"Password",type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),n("v-card-actions",[n("v-spacer"),n("button",{staticClass:"btn",attrs:{type:"submit"}},[e._v("LogIn")])],1)],1)],1)},xe=[],we=(n("ffc1"),n("96cf"),n("3b8d")),Ce=n("bc3a"),Ie=n.n(Ce),ke="/api/",Ue=Ie.a.create({withCredentials:!0});function $e(e){return qe.apply(this,arguments)}function qe(){return qe=Object(we["a"])(regeneratorRuntime.mark(function e(t){var n,s,r,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"get",s=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=2,e.next=5,Ue({url:"".concat(ke).concat(t),method:n,data:s});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:if(e.prev=9,e.t0=e["catch"](2),console.log("http service got error:",e.t0),401!==e.t0.response.status){e.next=17;break}console.log("http service got 401 error"),Vs.push("/login"),e.next=18;break;case 17:return e.abrupt("return",Promise.reject("http service got not-401 error: ",e.t0));case 18:case"end":return e.stop()}},e,null,[[2,9]])})),qe.apply(this,arguments)}var Ne={ajax:$e},Se={query:Fe,getById:Oe,signup:Be,update:Le,remove:Ae,login:Te,logout:Ve,getLoggedUser:Re};function Fe(e,t){return e.currLat=t.lat,e.currLng=t.lng,Ne.ajax("user".concat(Me(e))).then(function(e){return e})}function Oe(e){return Ne.ajax("user/".concat(e))}function Le(e){return Ne.ajax("user/".concat(e._id),"put",e).then(function(e){return e}).catch(function(e){return e})}function Ae(e){return Ne.ajax("user/".concat(e),"delete")}function Te(e){return Ne.ajax("auth/login","post",e).then(function(e){return e}).catch(function(e){return e})}function Be(e){return Ne.ajax("auth/signup","post",e)}function Ve(){return Ne.ajax("auth/logout","post")}function Re(){return Ne.ajax("auth/")}function Me(e){if(e){var t=Object.entries(e).map(function(e){return"".concat(e[0],"=").concat(e[1],"&")});return t.unshift("?"),t.join("")}}var Pe={data:function(){return{user:{username:"",password:""}}},methods:{doLogIn:function(){var e=this;console.log("Login",this.user),this.$store.dispatch({type:"login",user:this.user}).then(function(t){e.$router.push("/user")}).catch(function(e){console.log("got here with a mistake",e)})}}},Ee=Pe,De=(n("0d3a"),n("99d9")),ze=n("4bd4"),He=n("2677"),Je=Object(m["a"])(Ee,je,xe,!1,null,null,null),Ye=Je.exports;w()(Je,{VCardActions:De["a"],VForm:ze["a"],VSpacer:M["a"],VTextField:He["a"]});var Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sign-up"},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.doSignUp(t)}}},[n("v-text-field",{attrs:{"prepend-icon":"person",label:"First name",type:"text"},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}}),n("v-text-field",{attrs:{"prepend-icon":"person",label:"Last name",type:"text"},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}}),n("v-text-field",{attrs:{"prepend-icon":"lock",label:"Password",type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),n("v-card-actions",[n("v-spacer"),n("button",{staticClass:"btn",attrs:{type:"submit"}},[e._v("SignUp")])],1)],1)],1)},Ke=[],We={data:function(){return{user:{firstName:"",lastName:"",password:""}}},methods:{doSignUp:function(){var e=this;this.$store.dispatch({type:"signup",user:this.user}).then(function(t){e.$router.push("/user")}).catch(function(t){console.log(t),e.$router.push("/signup")})}}},Ze=We,Qe=(n("0079"),Object(m["a"])(Ze,Ge,Ke,!1,null,null,null)),Xe=Qe.exports;w()(Qe,{VCardActions:De["a"],VForm:ze["a"],VSpacer:M["a"],VTextField:He["a"]});var et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"})},tt=[],nt={},st=nt,rt=Object(m["a"])(st,et,tt,!1,null,null,null),it=rt.exports,at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-home"},[n("div",{staticClass:"top-bar bg"},[e.users?n("h1",{staticClass:"lato-light"},[e._v("\n        Found\n        "),n("b",[e._v(e._s(e.users.length))]),e._v("\n        Fellow Travelers!\n      ")]):e._e(),n("h4",[n("v-icon",{attrs:{size:"18"}},[e._v("location_on")]),e._v("\n        Location: \n        "+e._s(e.location)+"\n      ")],1)]),e.users?n("h3",{staticClass:"lato-light"}):e._e(),n("div",{staticClass:"flex user-gallery"},[e.currMin?n("img",{attrs:{src:e.currMin.profileImg},on:{click:function(t){return e.navUsers(-1)}}}):e._e(),e.users?n("user-preview",{attrs:{user:e.users[e.currUserIdx]},on:{nav:e.navUsers,request:e.sendRequest}}):e._e(),e.currMax?n("img",{attrs:{src:e.currMax.profileImg},on:{click:function(t){return e.navUsers(1)}}}):e._e()],1),n("div",{staticClass:"flex map-filter"},[n("user-filter"),n("users-map",{on:{goToUser:e.navToUser}})],1)])},ot=[],ct=(n("20d6"),n("75fc")),ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("li",{staticClass:"user-preview flex column",class:e.isAdminPageClass},[n("div",{staticClass:"flex user-nav"},[e.isAdminPage?e._e():n("button",{staticClass:"btn-arrow bounce",on:{click:function(t){return t.stopPropagation(),e.emitNavUsers(-1)}}},[n("v-icon",{attrs:{color:"white"}},[e._v("keyboard_arrow_left")])],1),n("router-link",{attrs:{to:e.detailsUrl}},[n("figure",{staticClass:"snip1529 img-container"},[n("img",{attrs:{src:e.user.profileImg}}),n("div",{staticClass:"date"},[n("span",{staticClass:"day"},[e._v(e._s(e.distance))]),n("span",{staticClass:"month"},[e._v("km")])]),n("figcaption",[n("h3",[e._v(e._s(e.user.name.first)+" "+e._s(e.user.name.last)+", "+e._s(e.age))]),n("p",[e._v(e._s(e.user.residance.city)+", "+e._s(e.user.residance.country))])]),n("div",{class:{hover:e.isHover},on:{mouseleave:function(t){e.isHover=!1}}},[n("i",[e._v("View profile")])]),n("a",{attrs:{href:"#"}})])]),e.isAdminPage?e._e():n("button",{staticClass:"btn-arrow bounce",on:{click:function(t){return t.stopPropagation(),e.emitNavUsers(1)}}},[n("v-icon",{attrs:{color:"white"}},[e._v("keyboard_arrow_right")])],1)],1),e.isAdminPage?e._e():n("button",{staticClass:"btn primary",attrs:{disabled:e.possibleToRequest},on:{click:e.emitRequest}},[e._v("\n    "+e._s(e.btnText)+"\n    "),n("span",{staticClass:"shiny"})]),e.isAdminPage?n("div",{staticClass:"actions"},[n("router-link",{attrs:{to:e.editUrl}},[e._v("Edit")]),e._v("|\n    "),n("button",{attrs:{title:"delete user"},on:{click:e.emitDelete}},[e._v("x")])],1):e._e()]):e._e()},lt=[],dt=(n("28a5"),{getRandomInt:ft,makeLorem:ht,makeId:pt,getTodayAsInputVal:vt,createSortFuncTxt:bt,getRandomColors:yt,calulateDistance:jt,randomGeo:xt,randomDate:wt});function ft(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function pt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function ht(e){var t="";while(t.length<e){var n=ft(3,6),s=gt(n);Math.random()>.9&&(s+=","),t+=s+" "}return t=t.substring(0,e),t=t[0].toUpperCase()+t.substr(1),t}function mt(){var e="abcdefghijklmnopqrstuvwxyz",t=parseInt(Math.random()*e.length);return e.charAt(t)}function gt(e){var t="";while(t.length<e){var n=mt();t+=n}return t}function vt(){var e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toJSON().slice(0,10)}function bt(e,t){function n(n,s){return"+"===t?n[e]>s[e]?1:n[e]<s[e]?-1:0:n[e]<s[e]?1:n[e]>s[e]?-1:0}return n}function yt(e){var t=[];while(t.length<e)t.push(_t());return t}function _t(){for(var e="0123456789ABCDEF".split(""),t="#",n=0;n<6;n++)t+=e[Math.floor(16*Math.random())];return t}function jt(e,t){var n=6371,s=(e.lat-t.lat)*Math.PI/180,r=(e.lng-t.lng)*Math.PI/180,i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),a=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),o=n*a;return o>1?Math.round(o):o<=1?Math.round(1e3*o):o}function xt(e,t){var n=e.lat,s=e.lng,r=t/111300,i=Math.random(),a=Math.random(),o=r*Math.sqrt(i),c=2*Math.PI*a,u=o*Math.cos(c),l=o*Math.sin(c);return{lat:l+n,lng:u+s}}function wt(e,t){return new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime()))}var Ct={getRandomImg:kt,uploadImg:Ut},It="image/";function kt(e){return Ne.ajax("".concat(It,"setRandomImg/").concat(e))}function Ut(e){return $t.apply(this,arguments)}function $t(){return $t=Object(we["a"])(regeneratorRuntime.mark(function e(t){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=new FormData,n.append("imgUpload",t.target.files[0]),e.next=4,Ne.ajax("".concat(It,"upload/cloudinary"),"post",n);case 4:return s=e.sent,e.abrupt("return",s.url);case 6:case"end":return e.stop()}},e)})),$t.apply(this,arguments)}var qt={props:{user:{type:Object,require:!0},type:{type:String,require:!1}},data:function(){return{isHover:!0}},computed:{age:function(){return(new Date).getFullYear()-this.user.birthDate},detailsUrl:function(){return"/user/".concat(this.user._id)},editUrl:function(){return"/profile/edit"},fullName:function(){return this.user.firstName+" "+this.user.lastName},isAdminPage:function(){return"admin"===this.type},isAdminPageClass:function(){return"admin"===this.type?"admin":""},distance:function(){return dt.calulateDistance(this.$store.getters.location,this.user.location)},btnText:function(){var e=this.user._id;return this.$store.getters.isFriendById(e)?"Your Friend":this.$store.getters.isRequestedById(e)?"Pending, waiting for your approve":this.$store.getters.isRequesterById(e)?"Pending, waiting for recipient approve":"Send A Request"},possibleToRequest:function(){var e=this.user._id;return!!(this.$store.getters.isFriendById(e)||this.$store.getters.isRequestedById(e)||this.$store.getters.isRequesterById(e))}},methods:{emitDelete:function(){this.$parent.$emit("delete-user",this.user._id)},emitRequest:function(){this.$emit("request",{userId:this.user._id,name:this.user.name.first+" "+this.user.name.last})},emitNavUsers:function(e){this.$emit("nav",e)},changePic:function(){var e=JSON.parse(JSON.stringify(this.user));Ct.getRandomImg("travel").then(function(t){e.profileImg=t,Se.update(e).then(function(){console.log("done")})})}}},Nt=qt,St=(n("6905"),Object(m["a"])(Nt,ut,lt,!1,null,null,null)),Ft=St.exports;w()(St,{VIcon:U["a"]});var Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"user-slider"})},Lt=[],At={},Tt=At,Bt=Object(m["a"])(Tt,Ot,Lt,!1,null,null,null),Vt=Bt.exports,Rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GmapMap",{staticStyle:{width:"800px",height:"400px",margin:"40px 10px"},attrs:{center:e.userPosition,zoom:11,"map-type-id":"terrain"}},[n("GmapMarker",{attrs:{position:e.userPosition,clickable:!0,draggable:!1,title:"me"}}),e._l(e.users,function(t,s){return n("GmapMarker",{key:s,attrs:{position:t.location,clickable:!0,draggable:!1,title:t.name.first+" "+t.name.last,icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"},on:{click:function(n){return e.goToUser(t._id)}}})})],2)},Mt=[],Pt=n("755e"),Et={computed:{users:function(){return this.$store.getters.users},userPosition:function(){return this.$store.getters.location}},methods:{goToUser:function(e){this.$emit("goToUser",e)}}},Dt=Et,zt=Object(m["a"])(Dt,Rt,Mt,!1,null,null,null),Ht=zt.exports,Jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-filter flex column lato-light"},[n("h1",[e._v("Filter Travelers")]),n("v-flex",[n("v-subheader",{staticClass:"pl-0"},[e._v("Distance")]),n("v-slider",{attrs:{"thumb-color":"red","thumb-size":26,"thumb-label":"always",min:"1",max:"100"},on:{input:e.setFilter},model:{value:e.filterBy.distance,callback:function(t){e.$set(e.filterBy,"distance",t)},expression:"filterBy.distance"}})],1),n("h3",{staticClass:"pl-0"},[e._v("Age")]),n("v-flex",{staticStyle:{"align-items":"baseline"}},[n("v-flex",{staticStyle:{"align-items":"baseline"}},[n("v-subheader",{staticClass:"pl-0"},[e._v("From")]),n("v-text-field",{staticClass:"mt-0",attrs:{"hide-details":"","single-line":"",type:"number"},on:{input:e.setFilter},model:{value:e.filterBy.minAge,callback:function(t){e.$set(e.filterBy,"minAge",t)},expression:"filterBy.minAge"}})],1),n("v-flex",{staticStyle:{"align-items":"baseline"}},[n("v-subheader",{staticClass:"pl-0 ml-3"},[e._v("To")]),n("v-text-field",{staticClass:"ma-2",attrs:{"hide-details":"","single-line":"",type:"number"},on:{input:e.setFilter},model:{value:e.filterBy.maxAge,callback:function(t){e.$set(e.filterBy,"maxAge",t)},expression:"filterBy.maxAge"}})],1)],1),n("v-flex",[n("v-subheader",{staticClass:"pl-0"},[e._v("Gender")]),n("gender-picker",{on:{input:e.setFilter},model:{value:e.filterBy.gender,callback:function(t){e.$set(e.filterBy,"gender",t)},expression:"filterBy.gender"}})],1),n("router-link",{attrs:{to:"/user"}},[e._v("Back To Travelers")])],1)},Yt=[],Gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"picker"},[n("button",{staticClass:"dropbtn",on:{click:function(t){return t.preventDefault(),e.toggleShowDropdownContent(t)}}},[e._v(e._s(e.display)+"▼")]),e.showContent?n("ul",{staticClass:"dropdown-content"},e._l(Object.entries(e.genders),function(t){return n("li",{key:t[0],staticClass:"dropdown-item",on:{click:function(n){return n.preventDefault(),e.emitChangedValue(t[0])}}},[e._v(" "+e._s(t[1])+"\n        ")])}),0):e._e()])},Kt=[],Wt={props:{value:{type:String,require:!0},type:{type:String,require:!1}},data:function(){return{showContent:!1,genders:{woman:"👩 Woman",man:"👨 Man",other:"Other"}}},created:function(){"picker"!==this.type&&(this.genders.all="All")},methods:{emitChangedValue:function(e){this.showContent=!1,this.$emit("input",e)},toggleShowDropdownContent:function(){this.showContent=!this.showContent}},computed:{display:function(){return this.genders[this.value]}}},Zt=Wt,Qt=(n("1b08"),Object(m["a"])(Zt,Gt,Kt,!1,null,null,null)),Xt=Qt.exports,en={data:function(){return{filterBy:{distance:20,minAge:20,maxAge:80,gender:"all"}}},created:function(){this.filterBy=JSON.parse(JSON.stringify(this.$store.getters.filterBy))},methods:{setFilter:function(){this.$store.dispatch({type:"setFilter",filterBy:this.filterBy})}},components:{GenderPicker:Xt}},tn=en,nn=(n("5bd7"),n("0e8f")),sn=n("ba0d"),rn=n("e0c7"),an=Object(m["a"])(tn,Jt,Yt,!1,null,null,null),on=an.exports;w()(an,{VFlex:nn["a"],VSlider:sn["a"],VSubheader:rn["a"],VTextField:He["a"]});var cn={created:function(){this.$store.dispatch({type:"loadUsers"})},data:function(){return{currUserIdx:0,filterByName:null}},computed:{users:function(){var e=this,t=Object(ct["a"])(this.$store.getters.users),n=t.findIndex(function(t){return t._id===e.$store.getters.loggedInUser._id});return n>-1?t:(t.splice(n,1),t)},currMin:function(){if(this.users)return 0===this.currUserIdx?this.users[this.users.length-1]:this.users[this.currUserIdx-1]},currMax:function(){if(this.users)return this.currUserIdx===this.users.length-1?this.users[0]:this.users[this.currUserIdx+1]},location:function(){return this.$store.getters.location.address}},methods:{navUsers:function(e){0===this.currUserIdx&&e<0&&(this.currUserIdx=this.users.length-1),this.currUserIdx===this.users.length-1&&e>0&&(this.currUserIdx=0),this.$store.getters.loggedInUser._id===this.users[this.currUserIdx+e]._id&&(this.currUserIdx+=e),this.currUserIdx+=e},setFilter:function(){this.$store.dispatch({type:"setFilterByName",filterByName:this.filterByName})},sendRequest:function(e){var t=this,n={createdAt:(new Date).getTime(),location:this.$store.getters.location,sender:{userId:this.$store.getters.loggedInUser._id,name:this.$store.getters.loggedInUser.name.first+" "+this.$store.getters.loggedInUser.name.last},status:"pending",recipient:e,messages:[]};this.$store.dispatch({type:"sendRequest",request:n}).then(function(){console.log("request sent to",e),t.$noty.success("request sent to ".concat(e.name))})},navToUser:function(e){var t=this.users.findIndex(function(t){return t._id===e});this.currUserIdx=t}},components:{UserPreview:Ft,UserSlider:Vt,UsersMap:Ht,UserFilter:on}},un=cn,ln=Object(m["a"])(un,at,ot,!1,null,null,null),dn=ln.exports;w()(ln,{VIcon:U["a"]});var fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin"},[n("h1",[e._v("Admin Page")]),n("user-list",{attrs:{type:"admin",users:e.users}})],1)},pn=[],hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticClass:"users-list"},[n("h3",[e._v("Users list:")]),e._l(e.users,function(t){return n("user-preview",{key:t._id,attrs:{type:e.type,user:t}})})],2)])},mn=[],gn={props:{users:{type:Array,require:!0},type:{type:String,require:!1}},components:{UserPreview:Ft}},vn=gn,bn=(n("7e14"),Object(m["a"])(vn,hn,mn,!1,null,null,null)),yn=bn.exports,_n={created:function(){this.$store.dispatch({type:"loadUsers"})},computed:{users:function(){return this.$store.getters.users}},components:{UserList:yn}},jn=_n,xn=Object(m["a"])(jn,fn,pn,!1,null,null,null),wn=xn.exports,Cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("div",{staticClass:"user-edit lato-light"},[n("h1",{staticClass:"title"},[e._v("Edit profile settings")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.saveUser(t)}}},[n("v-text-field",{attrs:{"prepend-icon":"email",label:"email",type:"email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),n("v-select",{attrs:{"prepend-icon":"people",items:e.items,label:"Update gender","data-vv-name":"select"},model:{value:e.user.gender,callback:function(t){e.$set(e.user,"gender",t)},expression:"user.gender"}}),n("v-text-field",{attrs:{"prepend-icon":"edit_location",label:"Location (City)",type:"text"},model:{value:e.user.residance.city,callback:function(t){e.$set(e.user.residance,"city",t)},expression:"user.residance.city"}}),n("v-text-field",{attrs:{"prepend-icon":"edit_location",label:"Location (Country)",type:"text"},model:{value:e.user.residance.country,callback:function(t){e.$set(e.user.residance,"country",t)},expression:"user.residance.country"}}),n("v-text-field",{attrs:{"prepend-icon":"event",label:"Year of birth",type:"number"},model:{value:e.user.birthDate,callback:function(t){e.$set(e.user,"birthDate",t)},expression:"user.birthDate"}}),n("button",{staticClass:"btn",attrs:{type:"submit"}},[e._v(e._s(e.btnText))])],1)]):e._e()},In=[],kn={created:function(){this.getUser()},data:function(){return{user:{residance:{city:null,country:null}},gender:null,items:["","Man","Woman","Other"]}},computed:{btnText:function(){return this.user._id?"Update":"Add"}},methods:{saveUser:function(){var e=this;this.$store.dispatch({type:"updateUser",user:this.user}).then(function(){console.log("updated user"),e.$router.push("/user")})},getUser:function(){var e=this.$store.getters.loggedInUser;console.log("user",e),this.user=e}},components:{}},Un=kn,$n=(n("12b8"),n("b56d")),qn=Object(m["a"])(Un,Cn,In,!1,null,null,null),Nn=qn.exports;w()(qn,{VSelect:$n["a"],VTextField:He["a"]});var Sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("section",{staticClass:"user-profile lato-light"},[n("div",{staticClass:"cover parallax"},[n("img",{staticClass:"profile-img",attrs:{src:e.user.profileImg}}),n("h1",[e._v(e._s(e.user.name.first)+" "+e._s(e.user.name.last)+", "+e._s(e.age))]),n("p",[e._v(e._s(e.user.residance.city)+", "+e._s(e.user.residance.country))]),n("div",{staticClass:"actions flex"},[n("div",[n("router-link",{staticClass:"flex wrap",attrs:{to:"/profile/edit"}},[n("v-icon",{attrs:{color:"white"}},[e._v("edit")]),e._v("Edit general info\n        ")],1)],1),n("div",[n("router-link",{attrs:{to:"/friends"}},[n("v-icon",{attrs:{color:"white"}},[e._v("people")]),e._v("Friends\n        ")],1)],1)])]),n("div",{staticClass:"user-info"},[n("div",[n("h2",[e._v("Bucket List")]),n("ul",{staticClass:"flex wrap"},e._l(e.user.bucketList,function(t){return n("li",{key:t,staticClass:"tag"},[e._v(e._s(t)+" ×")])}),0)]),n("div",[n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("h2",[e._v("\n        About me\n        "),n("v-icon",e._g({attrs:{title:"Edit about me"}},s),[e._v("edit")])],1)]}}],null,!1,864657084),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Edit about me:")])]),n("v-card-text",[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",[n("v-textarea",{attrs:{hint:"edit info"},model:{value:e.user.description,callback:function(t){e.$set(e.user,"description",t)},expression:"user.description"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.editInfo(),e.dialog=!1}}},[e._v("Save")])],1)],1)],1)],1),n("div",{staticClass:"flex"},[n("p",[e._v(e._s(e.user.description))])])],1)])]):e._e()},Fn=[],On={data:function(){return{user:null,dialog:!1,isLoadingPic:!1,isFileUpload:!1}},created:function(){this.user=this.$store.getters.loggedInUser},computed:{age:function(){return(new Date).getFullYear()-this.user.birthDate}},methods:{editInfo:function(){this.$store.dispatch({type:"updateUser",user:this.user}).then(function(){console.log("updated user")})},openFileInput:function(){this.isFileUpload=!this.isFileUpload},uploadImage:function(e){var t=this;this.isLoadingPic=!0,this.$store.dispatch({type:"uploadImg",event:e}).then(function(e){t.user.profileImg=e,t.isLoadingPic=!1})}}},Ln=On,An=(n("0fb2"),n("12b2")),Tn=n("169a"),Bn=n("a844"),Vn=Object(m["a"])(Ln,Sn,Fn,!1,null,null,null),Rn=Vn.exports;w()(Vn,{VBtn:C["a"],VCard:I["a"],VCardActions:De["a"],VCardText:De["b"],VCardTitle:An["a"],VContainer:A["a"],VDialog:Tn["a"],VFlex:nn["a"],VIcon:U["a"],VLayout:T["a"],VSpacer:M["a"],VTextarea:Bn["a"]});var Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"user-details"},[e.user?n("div",{staticClass:"user-profile lato-light"},[n("div",{staticClass:"cover parallax"},[n("img",{staticClass:"profile-img",attrs:{src:e.user.profileImg}}),n("h1",[e._v(e._s(e.user.name.first)+" "+e._s(e.user.name.last)+", "+e._s(e.age))]),n("p",[e._v(e._s(e.user.residance.city)+", "+e._s(e.user.residance.country))])]),n("div",{staticClass:"user-info"},[n("div",{staticClass:"flex start",staticStyle:{"align-items":"baseline"}},[n("h2",[e._v("Bucket List:")]),e._l(e.user.bucketList,function(t){return n("p",{key:t,staticClass:"tag"},[e._v(e._s(t))])})],2),n("h2",[e._v("About me")]),n("p",[e._v(e._s(e.user.description))]),n("div",{staticClass:"flex start",staticStyle:{"align-items":"baseline"}},[n("h2",[e._v("Prefered Travel Type:")]),e._l(e.user.travelTypes,function(t){return n("p",{key:t},[e._v(e._s(t))])})],2),n("div",{staticClass:"flex start",staticStyle:{"align-items":"baseline"}},[n("h2",[e._v("Age:")]),n("span",[e._v(e._s(e.age))])]),n("div",{staticClass:"flex start",staticStyle:{"align-items":"baseline"}},[n("h2",[e._v("location:")]),n("span",[e._v(e._s(e.distance)+" km away")])])])]):e._e(),n("div",{staticClass:"actions"},[n("button",{staticClass:"btn primary",on:{click:e.sendRequest}},[n("v-icon",{staticClass:"px-1",attrs:{color:"white"}},[e._v("send")]),e._v("Send a request\n      "),n("span",{staticClass:"shiny"})],1)])])},Pn=[],En={data:function(){return{user:null}},created:function(){var e=this,t=this.$route.params.userId;this.$store.dispatch({type:"loadUserById",userId:t}).then(function(t){t?e.user=JSON.parse(JSON.stringify(t)):e.$router.push("/user")})},computed:{distance:function(){return dt.calulateDistance(this.$store.getters.location,this.user.location)},age:function(){return(new Date).getFullYear()-this.user.birthDate}},methods:{sendRequest:function(){this.$store.dispatch({type:"sendRequest",user:this.user._id}),this.$router.push("/user")}}},Dn=En,zn=(n("b7f5"),Object(m["a"])(Dn,Mn,Pn,!1,null,null,null)),Hn=zn.exports;w()(zn,{VIcon:U["a"]});var Jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav",{staticClass:"inbox-nav"},[n("router-link",{staticClass:"title-container",attrs:{to:"/inbox/friends"}},[n("p",{staticClass:"inbox-title"},[e._v("Friends")])]),n("router-link",{staticClass:"sub-title-container",attrs:{to:"/inbox/requests"}},[n("p",{staticClass:"inbox-sub-title"},[e._v("Requests")])])],1),e.friendships.length?n("ul",{staticClass:"friends-list"},e._l(e.friendships,function(t){return n("friend-preview",{key:(t||{})._id,attrs:{friendship:t},on:{showChat:e.openChat}})}),1):e._e(),e.showChat?n("chat-room",{attrs:{chatInfo:e.chatInfo},on:{close:e.closeChat}}):e._e()],1)},Yn=[],Gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.friendship?n("li",{staticClass:"friend-preview"},[n("router-link",{attrs:{to:e.friendUrl}},[e.friendImg?n("img",{attrs:{src:e.friendImg}}):e._e()]),n("h4",[e._v(e._s(e.friendName))]),n("h5",[e._v("friends since "+e._s(e.time))]),n("button",{on:{click:e.emitShowChat}},[n("i",{staticClass:"material-icons"},[e._v("chat")])])],1):e._e()])},Kn=[],Wn=n("c1df"),Zn=n.n(Wn),Qn={props:{friendship:{type:Object,require:!0}},data:function(){return{showChat:!1}},computed:{detailsUrl:function(){return"/inbox/friends/".concat(this.friendship._id)},friendImg:function(){var e=this.$store.getters.loggedInUser._id.includes(this.friendship.sender.userId)?this.friendship.recipient.userId:this.friendship.sender.userId,t=this.$store.getters.userById(e);return t?t.profileImg:null},time:function(){return Zn()(this.friendship.createdAt).fromNow()},friendName:function(){return this.$store.getters.loggedInUser._id.includes(this.friendship.sender.userId)?this.friendship.recipient.name:this.friendship.sender.name},friendUrl:function(){var e=this.$store.getters.loggedInUser._id.includes(this.friendship.sender.userId)?this.friendship.recipient.userId:this.friendship.sender.userId;return"/user/".concat(e)}},methods:{emitShowChat:function(){this.$emit("showChat",{friendshipId:this.friendship._id,history:this.friendship.messages,friendImg:this.friendImg,friendName:this.friendName})}}},Xn=Qn,es=(n("5b22"),Object(m["a"])(Xn,Gn,Kn,!1,null,null,null)),ts=es.exports,ns=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-box"},[n("header",[e.chatInfo.friendImg?n("img",{attrs:{src:e.chatInfo.friendImg}}):e._e(),n("h3",[e._v(e._s(e.chatInfo.friendName))]),n("button",{on:{click:e.emitCloseChat}},[e._v("×")])]),n("div",{staticClass:"chat-body"},[n("ul",{ref:"msgsList",staticClass:"chat-area"},e._l(e.messages,function(t,s){return n("li",{key:s,staticClass:"message",class:{"message-out":t.from===e.user,"message-in":t.from!==e.user}},[e._v(e._s(t.txt))])}),0)]),n("div",{staticClass:"input-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.txt,expression:"txt"}],staticClass:"input-msg",attrs:{type:"text",placeholder:"Write your message...",autofocus:""},domProps:{value:e.txt},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},input:function(t){t.target.composing||(e.txt=t.target.value)}}}),n("button",{staticClass:"material-icons",on:{click:e.sendMessage}},[e._v("send")])])])},ss=[],rs=n("8055"),is=n.n(rs),as={data:function(){return{txt:"",messages:[],socket:is()("localhost:3000")}},props:["chatInfo"],created:function(){var e=this;this.chatInfo.history.forEach(function(t){e.messages.push(t)}),this.socket.emit("chat join",{user:this.user,friendshipId:this.chatInfo.friendshipId}),this.socket.on("chat newMsg",function(t){e.messages.push(t),setTimeout(function(){e.$refs.msgsList&&e.$refs.msgsList.scrollTo({top:e.$refs.msgsList.scrollHeight,behavior:"smooth"})},20)})},computed:{user:function(){return this.$store.getters.loggedInUser.username}},methods:{sendMessage:function(){var e={from:this.user,txt:this.txt};this.socket.emit("chat msg",{msg:e,friendshipId:this.chatInfo.friendshipId}),this.txt=""},emitCloseChat:function(){this.$emit("close")}},destroyed:function(){this.messages=[]}},os=as,cs=(n("b4be"),Object(m["a"])(os,ns,ss,!1,null,"6a9244f8",null)),us=cs.exports,ls={data:function(){return{showChat:!1,chatInfo:null}},created:function(){this.$store.dispatch({type:"loadFriends"})},computed:{friendships:function(){return this.$store.getters.friends||[]}},methods:{openChat:function(e){this.showChat=!0,this.chatInfo=e},closeChat:function(){this.showChat=!1,this.chatInfo=null}},components:{FriendPreview:ts,ChatRoom:us}},ds=ls,fs=Object(m["a"])(ds,Jn,Yn,!1,null,null,null),ps=fs.exports,hs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-inbox"},[n("router-view")],1)},ms=[],gs={},vs=gs,bs=(n("b3dff"),Object(m["a"])(vs,hs,ms,!1,null,null,null)),ys=bs.exports,_s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav",{staticClass:"inbox-nav"},[n("router-link",{staticClass:"sub-title-container",attrs:{to:"/inbox/friends"}},[n("p",{staticClass:"inbox-sub-title"},[e._v("Friends")])]),n("router-link",{staticClass:"title-container",attrs:{to:"/inbox/requests"}},[n("p",{staticClass:"inbox-title"},[e._v("Requests")])])],1),e.requests?n("ul",{staticClass:"requests-list"},e._l(e.requests,function(e){return n("request-preview",{key:(e||{})._id,attrs:{request:e}})}),1):e._e()])},js=[],xs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.request?n("li",{staticClass:"request-preview"},[e.sender?n("router-link",{attrs:{to:e.senderUrl}},[n("img",{attrs:{src:e.senderImage}})]):e._e(),n("h4",[e._v(" "+e._s(e.request.sender.name))]),n("h4",[e._v(" sent "+e._s(e.time))]),n("button",{on:{click:e.approveRequest}},[n("v-icon",{attrs:{color:"blue"}},[e._v("check_circle")])],1)],1):e._e()},ws=[],Cs={props:{request:{type:Object,require:!0}},data:function(){return{sender:null}},created:function(){var e=this;this.$store.dispatch({type:"loadUserById",userId:this.request.sender.userId}).then(function(t){e.sender=t})},computed:{senderUrl:function(){return"/user/".concat(this.request.sender.userId)},time:function(){return Zn()(this.request.createdAt).fromNow()},senderImage:function(){return this.sender.profileImg}},methods:{approveRequest:function(){var e=this;this.$store.dispatch({type:"approveRequest",requestId:this.request._id}).then(function(){console.log("request approved, user is now in your friends list"),setTimeout(function(){e.$router.push("/inbox/friends")},100)})}}},Is=Cs,ks=(n("747f"),Object(m["a"])(Is,xs,ws,!1,null,null,null)),Us=ks.exports;w()(ks,{VIcon:U["a"]});var $s={created:function(){this.$store.dispatch({type:"loadRequests"})},computed:{requests:function(){return this.$store.getters.requests||[]}},components:{RequestPreview:Us}},qs=$s,Ns=Object(m["a"])(qs,_s,js,!1,null,null,null),Ss=Ns.exports,Fs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.friendship?n("div",[n("chat-room",{attrs:{friendshipId:e.friendship._id,history:e.friendship.messages}})],1):e._e()},Os=[],Ls={data:function(){return{friendship:null}},created:function(){var e=this,t=this.$route.params.friendshipId;this.$store.dispatch({type:"loadFriendshipById",friendshipId:t}).then(function(t){t?e.friendship=JSON.parse(JSON.stringify(t)):e.$router.push("/inbox")})},computed:{friendName:function(){return this.$store.getters.loggedInUser._id.includes(this.friendship.sender.userId)?this.friendship.recipient.name:this.friendship.sender.name}},components:{ChatRoom:us}},As=Ls,Ts=Object(m["a"])(As,Fs,Os,!1,null,null,null),Bs=Ts.exports;s["a"].use(K["a"]);var Vs=new K["a"]({routes:[{path:"/",name:"home",component:_e},{path:"/login",name:"login",component:Ye},{path:"/signup",name:"signup",component:Xe},{path:"/about",name:"about",component:it},{path:"/user",name:"AppHome",component:dn},{path:"/admin",name:"AdminPage",component:wn},{path:"/profile",name:"UserProfile",component:Rn},{path:"/profile/edit",name:"EditUser",component:Nn},{path:"/user/:userId",name:"UserDetails",component:Hn},{path:"/inbox",name:"UserInbox",component:ys,children:[{path:"friends",component:ps},{path:"friends/:friendshipId",component:Bs},{path:"requests",component:Ss}]},{path:"/filterTravelers",name:"FilterTravelers",component:on}]}),Rs=n("2f62"),Ms="/",Ps=is()(Ms),Es={on:Ds,emit:zs};function Ds(e,t){Ps.on(e,t)}function zs(e,t){Ps.emit(e,t)}var Hs={strict:!0,state:{users:[],loggedUser:null,filterBy:{distance:20,minAge:20,maxAge:80,gender:"all",name:null},location:{lat:32.059391999999995,lng:34.8512256,address:"Kiryat Ono, Israel"},newNotification:null},getters:{loggedInUser:function(e){return e.loggedUser||{}},users:function(e){return e.users},isAdmin:function(e,t){return!!t.loggedInUser.isAdmin},filterBy:function(e){return e.filterBy},userById:function(e){return function(t){return e.users.find(function(e){return e._id===t})}},location:function(e){return e.location},notifications:function(e,t){return t.loggedInUser.notifications},unreadNotifications:function(e){return e.loggedUser?e.loggedUser.notifications.filter(function(e){return!e.readStatus}).length:0},newNotification:function(e){return e.newNotification}},mutations:{setLoggedUser:function(e,t){var n=t.user;e.loggedUser=n},setUsers:function(e,t){var n=t.filteredUsers;e.users=n},updateUser:function(e,t){var n=t.updatedUser,s=e.users.findIndex(function(e){return e._id===n._id});e.users.splice(s,1,n)},addUser:function(e,t){var n=t.addedUser;e.users.push(n)},removeUser:function(e,t){var n=t.userId,s=e.users.findIndex(function(e){return e._id===n});e.users.splice(s,1)},setFilter:function(e,t){var n=t.filterBy;e.filterBy=JSON.parse(JSON.stringify(n))},setFilterByName:function(e,t){var n=t.filterByName;e.filterBy.name=n},updateLocation:function(e,t){var n=t.location;e.location=n},addNotification:function(e,t){var n=t.notification;e.loggedUser.notifications.push(n)},updateReadNotification:function(e,t){var n=t.index;e.loggedUser.notifications[n].readStatus=!0},setNewNotification:function(e,t){var n=t.notification;e.newNotification=n}},actions:{login:function(e,t){var n=t.user;return Se.login(n).then(function(t){if(t)return e.commit({type:"setLoggedUser",user:t}),e.dispatch({type:"appLogin",root:!0}),e.dispatch({type:"loadFriendships"}),t;throw"no user found"})},signup:function(e,t){var n=t.user;return Se.signup(n).then(function(t){return e.commit({type:"addUser",user:t}),t})},deleteUser:function(e,t){var n=t.userId;return Se.remove(n).then(function(){return e.commit({type:"removeUser",userId:n}),{}})},updateUser:function(e,t){var n=t.user;return Se.update(n).then(function(t){return e.commit({type:"updateUser",updatedUser:t}),t})},logout:function(e){return Se.logout().then(function(){return e.commit({type:"setLoggedUser",user:null}),{}})},setFilter:function(e,t){var n=t.filterBy;e.commit({type:"setFilter",filterBy:n}),e.dispatch({type:"loadUsers"})},setFilterByName:function(e,t){var n=t.filterByName;e.commit({type:"setFilterByName",filterByName:n}),e.dispatch({type:"loadUsers"})},updateProfile:function(e,t){var n=t.userData;return Se.update(n).then(function(t){return e.commit({type:"updateUser",updatedUser:t}),t})},loadUsers:function(e){return Se.query(e.state.filterBy,e.state.location).then(function(t){return e.commit({type:"setUsers",filteredUsers:t}),t})},updateLocation:function(e,t){var n=t.location;e.commit({type:"updateLocation",location:n})},loadUserById:function(e,t){var n=t.userId;return Se.getById(n).then(function(e){return e})},loadUserOrDefaultUser:function(e){return Se.getLoggedUser().then(function(t){t?(e.commit({type:"setLoggedUser",user:t}),e.dispatch({type:"appLogin",root:!0}),e.dispatch({type:"loadFriendships"})):e.dispatch({type:"login",user:{username:"TabathaEwing",password:"tabathaewing"}})})},appLogin:function(e){var t=e.getters,n=e.commit;Es.emit("app login",{username:t.loggedInUser.username,userId:t.loggedInUser._id}),Es.on("app newNotification",function(e){n({type:"addNotification",notification:e}),n({type:"setNewNotification",notification:e})})},readNotification:function(e,t){var n=t.index,s=e.state.loggedUser;s.notifications[n].readStatus=!0,Se.update(s).then(function(){e.commit({type:"updateReadNotification",index:n})})},clearNewNotification:function(e){var t=e.commit;t({type:"setNewNotification",notification:null})}}},Js={query:Ys,getById:Zs,update:Qs,remove:Xs,getFriends:Gs,getRequests:Ks,sendRequest:er,approveRequest:tr,getRequestsSent:Ws};function Ys(){return Ne.ajax("friend/").then(function(e){return e})}function Gs(e){return Ne.ajax("friend/friends/byuser/".concat(e)).then(function(e){return e})}function Ks(e){return Ne.ajax("friend/requests/byuser/".concat(e)).then(function(e){return e})}function Ws(e){return Ne.ajax("friend/sent/byuser/".concat(e)).then(function(e){return e})}function Zs(e){return Ne.ajax("friend/".concat(e))}function Qs(e){return Ne.ajax("friend/".concat(e._id),"put",e)}function Xs(e){return Ne.ajax("friend/".concat(e),"delete")}function er(e){return Ne.ajax("friend/","post",e).then(function(){return e}).catch(function(e){console.log(e)})}function tr(e){return Ne.ajax("friend/request/".concat(e),"put").then(function(e){return e}).catch(function(e){console.log(e)})}var nr={strict:!0,state:{friends:[],requests:[],requestsSent:[]},getters:{friends:function(e){return e.friends},requests:function(e){return e.requests},friendshipById:function(e){return function(t){return e.friends.find(function(e){return e._id===t})}},isFriendById:function(e){return function(t){return e.friends.find(function(e){return"approved"===e.status&&(e.sender.userId===t||e.recipient.userId===t)})}},isRequestedById:function(e){return function(t){return e.requests.find(function(e){return"pending"===e.status&&e.sender.userId===t})}},isRequesterById:function(e){return function(t){return e.requestsSent.find(function(e){return"pending"===e.status&&e.recipient.userId===t})}}},mutations:{setFriends:function(e,t){var n=t.friends;e.friends=n},setRequests:function(e,t){var n=t.requests;e.requests=n},setRequestsSent:function(e,t){var n=t.requestsSent;e.requestsSent=n},updateFriend:function(e,t){var n=t.updatedFriend,s=e.friends.findIndex(function(e){return e._id===n._id});e.friends.splice(s,1,n)},removeFriend:function(e,t){var n=t.friendId,s=e.friends.findIndex(function(e){return e._id===n});e.friends.splice(s,1)},convertRequestToFriendship:function(e,t){var n=t.newFriendship,s=e.requests.findIndex(function(e){return e._id===n._id});s&&e.requests.splice(s,1),e.friends.unshift(n)},addRequest:function(e,t){var n=t.newRequest;e.requests.push(n)}},actions:{loadFriends:function(e){return Js.getFriends(e.getters.loggedInUser._id).then(function(t){return e.commit({type:"setFriends",friends:t}),t})},loadRequests:function(e){return Js.getRequests(e.getters.loggedInUser._id).then(function(t){return e.commit({type:"setRequests",requests:t}),t})},loadRequestsSent:function(e){return Js.getRequestsSent(e.getters.loggedInUser._id).then(function(t){return e.commit({type:"setRequestsSent",requestsSent:t}),t})},loadFriendships:function(e){return e.dispatch({type:"loadFriends"}),e.dispatch({type:"loadRequests"}),e.dispatch({type:"loadRequestsSent"})},deleteFriend:function(e,t){var n=t.friendId;return Js.remove(n).then(function(){return e.commit({type:"removeFriend",friendId:n}),{}})},updateFriend:function(e,t){var n=t.friend;return Js.update(n).then(function(t){return console.log("updated friend at store",t),e.commit({type:"updateFriend",friend:t}),t})},sendRequest:function(e,t){var n=t.request;return Js.sendRequest(n).then(function(t){return e.commit({type:"addRequest",newRequest:t}),Es.emit("send notification",{type:"request",sender:n.sender,recipient:n.recipient,loggedUser:e.getters.loggedInUser._id}),e.dispatch({type:"loadFriendships"}),t})},approveRequest:function(e,t){var n=t.requestId;return Js.approveRequest(n).then(function(t){return e.commit({type:"convertRequestToFriendship",newFriendship:t}),Es.emit("send notification",{type:"friendship",sender:t.sender,recipient:t.recipient,loggedUser:e.getters.loggedInUser._id}),e.dispatch({type:"loadFriendships"}),t})},loadFriendshipById:function(e,t){var n=t.friendshipId;return Js.getById(n).then(function(e){return e})}}};s["a"].use(Rs["a"]);var sr=new Rs["a"].Store({state:{},getters:{},modules:{UserStore:Hs,FriendStore:nr}});s["a"].filter("timeAgo",function(e){return Zn()(e).fromNow()});n("b107");var rr=n("9483");Object(rr["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ir=n("73e4"),ar=n.n(ir);s["a"].use(Pt,{load:{key:"AIzaSyAQz_Zc9Ys9pFeNAYxOhagonVUGOyg_zlg",libraries:"places"}}),s["a"].config.productionTip=!1,new s["a"]({router:Vs,store:sr,render:function(e){return e(G)}}).$mount("#app"),s["a"].use(ar.a,{timeout:4e3,progressBar:!0,layout:"bottomRight",theme:"relax"})},"5b22":function(e,t,n){"use strict";var s=n("92e4"),r=n.n(s);r.a},"5bd7":function(e,t,n){"use strict";var s=n("3171"),r=n.n(s);r.a},6905:function(e,t,n){"use strict";var s=n("038c"),r=n.n(s);r.a},"6c1f":function(e,t,n){e.exports=n.p+"img/3.e99f44de.jpg"},7068:function(e,t,n){},7143:function(e,t,n){},"71b3":function(e,t,n){e.exports=n.p+"img/6.0449bff7.jpg"},"747f":function(e,t,n){"use strict";var s=n("fdfe"),r=n.n(s);r.a},"79aae":function(e,t,n){e.exports=n.p+"img/4.6288edbe.jpg"},"7ce5":function(e,t,n){},"7e14":function(e,t,n){"use strict";var s=n("3517"),r=n.n(s);r.a},"88a7":function(e,t,n){},"8a3f":function(e,t,n){e.exports=n.p+"img/2.9655ecb3.jpg"},"92e4":function(e,t,n){},"982a":function(e,t,n){},a529:function(e,t,n){"use strict";var s=n("7143"),r=n.n(s);r.a},af6d:function(e,t,n){e.exports=n.p+"img/9.f10ce89a.jpg"},b107:function(e,t,n){},b3dff:function(e,t,n){"use strict";var s=n("d389"),r=n.n(s);r.a},b4be:function(e,t,n){"use strict";var s=n("7068"),r=n.n(s);r.a},b7f5:function(e,t,n){"use strict";var s=n("7ce5"),r=n.n(s);r.a},d389:function(e,t,n){},ddff:function(e,t,n){},de21:function(e,t,n){},e901:function(e,t,n){var s={"./1.jpg":"3613","./10.jpg":"029f","./2.jpg":"8a3f","./3.jpg":"6c1f","./4.jpg":"79aae","./5.jpg":"ef32","./6.jpg":"71b3","./7.jpg":"0472","./8.jpg":"f352","./9.jpg":"af6d"};function r(e){var t=i(e);return n(t)}function i(e){var t=s[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id="e901"},edbe:function(e,t,n){},ef32:function(e,t,n){e.exports=n.p+"img/5.744b33a3.jpg"},f352:function(e,t,n){e.exports=n.p+"img/8.7a432e85.jpg"},fdfe:function(e,t,n){}});
//# sourceMappingURL=app.f78a0fc3.js.map